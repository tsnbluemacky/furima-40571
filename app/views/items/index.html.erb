<%= render "shared/header" %>
<div class='main'>
  <!-- 商品一覧 -->
  <div class='item-contents'>
    <h2 class='title'>ピックアップカテゴリー</h2>
    <div class="subtitle">
      新規投稿商品
    </div>
    <ul class='item-lists'>
      <% if @items.any? %>
        <% @items.each do |item| %>
          <li class='list'>
            <%= link_to item_path(item) do %>
              <div class='item-img-content'>
                <!-- 画像の表示: ActiveStorageの画像を正しく表示し、画像がない場合の処理を追加 -->
                <% if item.image.attached? %>
                  <%= image_tag(url_for(item.image), class: "item-img", alt: item.name) %>
                <% else %>
                  <%= image_tag("default_image.png", class: "item-img", alt: "デフォルト画像") %>
                <% end %>
                <% if item.sold_out? %>
                  <div class='sold-out'>
                    <span>Sold Out!!</span>
                  </div>
                <% end %>
              </div>
              <div class='item-info'>
                <h3 class='item-name'><%= item.name %></h3>
                <div class='item-price'>
                  <span><%= item.price %>円<br><%= item.shipping.name %></span>
                  <div class='star-btn'>
                    <%= image_tag "star.png", class:"star-icon", alt: "お気に入り" %>
                    <span class='star-count'>0</span>
                  </div>
                </div>
              </div>
            <% end %>
          </li>
        <% end %>
      <% else %>
        <!-- 商品がない場合はダミー商品を表示 -->
        <li class='list'>
          <%= link_to '#' do %>
            <%= image_tag "https://tech-master.s3.amazonaws.com/uploads/curriculums/images/Rails1-4/sample.jpg", class: "item-img", alt: "サンプル画像" %>
            <div class='item-info'>
              <h3 class='item-name'>商品を出品してね！</h3>
              <div class='item-price'>
                <span>99999999円<br>(税込み)</span>
                <div class='star-btn'>
                  <%= image_tag "star.png", class:"star-icon", alt: "お気に入り" %>
                  <span class='star-count'>0</span>
                </div>
              </div>
            </div>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
  <%# /商品一覧 %>
</div>

<%= link_to(new_item_path, class: 'purchase-btn') do %>
  <span class='purchase-btn-text'>出品する</span>
  <%= image_tag 'icon_camera.png', size: '185x50', class: "purchase-btn-icon", alt: "カメラアイコン" %>
<% end %>
<%= render "shared/footer" %>